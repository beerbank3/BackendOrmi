{% extends 'blog/base.html' %}

{% block content %}
<h2>제목 : {{ post.title }}</h2>
<p>내용 : {{ post.content }}</p>
<p>작성자 : {{ post.writer }}</p>
<p>작성일 : {{ post.created_at }}</p>

<!-- 수정 삭제 -->
<a href="{% url 'blog:edit' pk=post.pk %}">수정</a>
<form action="{% url 'blog:delete' pk=post.pk %}" method="post">
    {% csrf_token %}
    <input type="submit" value="삭제">
</form>

<!-- 태그 작성 화면 -->
<h3>해시태그</h3>
<form action="{% url 'blog:tag-write' pk=post.pk %}" method="post">
    {% csrf_token %}
    {{ hashtag_form.name }}
    <input type="submit" value="태그 작성">
</form>

<!-- hashtag -->
{% if hashtags %}
    <ul>
        {% for hashtag in hashtags %}
            <li>
                <form action="{% url 'blog:tag-delete' pk=hashtag.pk %}" method="post">
                    {% csrf_token %}
                    {{ hashtag }}
                    <input type="submit" value="X" class="btn">
                </form>
            </li>
        {% endfor %}
    </ul>
{% else %}
<p>해시태그가 없습니다.</p>
{% endif %}

<!-- 댓글 작성 화면 -->
<h3>댓글</h3>
<form action="{% url 'blog:cm-write' pk=post.pk %}" method="post">
    {% csrf_token %}
    {{ comment_form.content }}
    <input type="submit">
</form>

<!-- comments -->
{% if comments %}
    <table class="table">
        <thead>
            <th>내용</th>
            <th>작성시간</th>
            <th>관리</th>
        </thead>
        <tbody>
            {% for comment in comments %}
                <tr>
                    <td>{{ comment.content }}</td>
                    <td>{{ comment.created_at }}</td>
                    <td>
                        <form action="{% url 'blog:cm-delete' pk=comment.pk %}" method="post">
                            {% csrf_token %}
                            <input type="submit" value="삭제">
                        </form>
                    </td>
                </tr>
            {% endfor %}
        </tbody>
    </table>
{% else %}
    <p>댓글이 없습니다.</p>
{% endif %}
<!-- if 문 -->
<!-- for 문 -->

{% endblock %}